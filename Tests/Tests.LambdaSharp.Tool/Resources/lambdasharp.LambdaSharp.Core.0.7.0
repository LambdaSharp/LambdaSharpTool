{
    "Version": "2019-07-04",
    "Module": "LambdaSharp.Core:0.7.0@lambdasharp",
    "Description": "LambdaSharp Core Resources and Services",
    "TemplateChecksum": "F85A4D2450B39262D0379A463E1886CB",
    "Date": "2019-09-10T23:57:20Z",
    "CoreServicesVersion": "0.7.0",
    "ParameterSections": [
        {
            "Title": "LambdaSharp Tier Settings",
            "Parameters": [
                {
                    "Name": "DeadLetterQueue",
                    "Type": "AWS::SQS::Queue",
                    "Label": "Dead letter queue for functions (leave blank to create a new queue)"
                },
                {
                    "Name": "LoggingStream",
                    "Type": "AWS::Kinesis::Stream",
                    "Label": "Logging Kinesis stream for functions (leave blank to create a new stream)"
                },
                {
                    "Name": "LoggingStreamRetentionPeriodHours",
                    "Type": "Number",
                    "Label": "Size of the Logging stream buffer (in hours)",
                    "Default": "24"
                },
                {
                    "Name": "LoggingStreamShardCount",
                    "Type": "Number",
                    "Label": "Number of Kinesis shards for the logging streams",
                    "Default": "1"
                },
                {
                    "Name": "CoreSecretsKey",
                    "Type": "AWS::KMS::Key",
                    "Label": "KMS key used by LambdaSharp.Core to encrypt sensitive information (leave blank to create a new key)",
                    "AllowedPattern": "(arn:aws:kms:.*)?",
                    "ConstraintDescription": "Must be a valid KMS Key ARN or left blank"
                }
            ]
        },
        {
            "Title": "Rollbar Settings",
            "Parameters": [
                {
                    "Name": "RollbarReadAccessToken",
                    "Type": "Secret",
                    "Label": "Account-level token for read operations (leave blank to disable Rollbar integration)",
                    "Default": ""
                },
                {
                    "Name": "RollbarWriteAccessToken",
                    "Type": "Secret",
                    "Label": "Account-level token for write operations (leave blank to disable Rollbar integration)",
                    "Default": ""
                },
                {
                    "Name": "RollbarProjectPrefix",
                    "Type": "String",
                    "Label": "Optional prefix when creating Rollbar projects (e.g. \"LambdaSharp-\")",
                    "Default": ""
                }
            ]
        },
        {
            "Title": "LambdaSharp Deployment Settings",
            "Parameters": [
                {
                    "Name": "ExistingDeploymentBucket",
                    "Type": "String",
                    "Label": "ARN of an existing S3 bucket for LambdaSharp deployments (leave blank to create a new S3 bucket)",
                    "AllowedPattern": "(arn:aws:s3:.*)?",
                    "ConstraintDescription": "Must be a valid S3 ARN (all lowercase) or left blank"
                }
            ]
        },
        {
            "Title": "LambdaSharp Module Options",
            "Parameters": [
                {
                    "Name": "Secrets",
                    "Type": "String",
                    "Label": "Comma-separated list of additional KMS secret keys",
                    "Default": ""
                },
                {
                    "Name": "XRayTracing",
                    "Type": "String",
                    "Label": "Enable AWS X-Ray tracing mode for module resources",
                    "Default": "Disabled",
                    "AllowedValues": [
                        "Disabled",
                        "RootModule",
                        "AllModules"
                    ]
                }
            ]
        }
    ],
    "Git": {
        "Branch": "WIP-v0.7",
        "SHA": "96426ecd336b85d4be7f0679731e3a30287ef61e"
    },
    "Artifacts": [
        "lambdasharp/LambdaSharp/Core/.artifacts/cloudformation_LambdaSharp.Core_F85A4D2450B39262D0379A463E1886CB.json",
        "lambdasharp/LambdaSharp/Core/.artifacts/function_LambdaSharp.Core_ProcessLogEvents_A80B317CA7B04B2920F4F5B84117D808.zip",
        "lambdasharp/LambdaSharp/Core/.artifacts/function_LambdaSharp.Core_RegistrationFunction_7DDD29C04306FF0C9C913F1571A8B9B5.zip"
    ],
    "Dependencies": [],
    "ResourceTypes": [
        {
            "Type": "LambdaSharp::Registration::Function",
            "Description": "Custom resource type for function registrations",
            "Properties": [
                {
                    "Name": "ModuleId",
                    "Description": "Module CloudFormation stack name",
                    "Type": "String",
                    "Required": true
                },
                {
                    "Name": "FunctionId",
                    "Description": "Module function ARN",
                    "Type": "String",
                    "Required": true
                },
                {
                    "Name": "FunctionName",
                    "Description": "Module function name",
                    "Type": "String",
                    "Required": true
                },
                {
                    "Name": "FunctionLogGroupName",
                    "Description": "Module function CloudWatch log group name",
                    "Type": "String",
                    "Required": true
                },
                {
                    "Name": "FunctionMaxMemory",
                    "Description": "Max memory for module function",
                    "Type": "Number",
                    "Required": true
                },
                {
                    "Name": "FunctionMaxDuration",
                    "Description": "Max duration for module function",
                    "Type": "Number",
                    "Required": true
                },
                {
                    "Name": "FunctionPlatform",
                    "Description": "Module function execution platform",
                    "Type": "String",
                    "Required": true
                },
                {
                    "Name": "FunctionFramework",
                    "Description": "Module function execution framework",
                    "Type": "String",
                    "Required": true
                },
                {
                    "Name": "FunctionLanguage",
                    "Description": "Module function programming language",
                    "Type": "String",
                    "Required": true
                }
            ],
            "Attributes": [
                {
                    "Name": "Registration",
                    "Description": "Registration ID",
                    "Type": "String",
                    "Required": true
                }
            ]
        },
        {
            "Type": "LambdaSharp::Registration::Module",
            "Description": "Custom resource type for module registrations",
            "Properties": [
                {
                    "Name": "ModuleId",
                    "Description": "Module CloudFormation stack name",
                    "Type": "String",
                    "Required": true
                },
                {
                    "Name": "Module",
                    "Description": "Module full name and version",
                    "Type": "String",
                    "Required": true
                }
            ],
            "Attributes": [
                {
                    "Name": "Registration",
                    "Description": "Registration ID",
                    "Type": "String",
                    "Required": true
                }
            ]
        }
    ],
    "Outputs": [
        {
            "Name": "CoreServices",
            "Description": "Flag indicating if operating services are deployed (String)",
            "Type": "String"
        },
        {
            "Name": "DeadLetterQueue",
            "Description": "Dead Letter Queue (ARN)",
            "Type": "AWS::SQS::Queue"
        },
        {
            "Name": "DeploymentBucket",
            "Description": "S3 bucket for published modules (ARN)",
            "Type": "AWS::S3::Bucket"
        },
        {
            "Name": "LoggingStream",
            "Description": "Logging Stream (ARN)",
            "Type": "AWS::Kinesis::Stream"
        },
        {
            "Name": "LoggingStreamRole",
            "Description": "CloudWatch Logs Role for writing to logging stream (ARN)",
            "Type": "AWS::IAM::Role"
        }
    ]
}